(window.webpackJsonp=window.webpackJsonp||[]).push([[288],{1631:function(e,t,s){"use strict";s.r(t),s.d(t,"EventFooterWidgetWrapper",(function(){return se})),s.d(t,"EventFooterWidgetGraphQLWrapper",(function(){return ie})),s.d(t,"default",(function(){return ae}));var i=s(5),a=s.n(i),n=s(1581),o=s(72),c=s(483),l=s(77),r=s(9),g=s.n(r),d=s(853),u=s(0),p=s(1),O=s(983),b=s(1031),m=s(1014),y=s(370);class v extends y.a{render(){const{isOpen:e,isModal:t,header:s,isFixedHeader:i,classes:n,style:o}=this.props,c=Object.assign(Object.assign({},m.a),{content:n.content,transition:b.a}),l=Object.assign(Object.assign({},o.headerFont),o.header),r={requestClose:this.props.handleDialogClose,dialogId:"CCPAOptOutDialog",isOpen:e,isModal:t,header:s,isFixedHeader:i,closeDialogOnOverlayClick:!0,style:Object.assign(Object.assign({},o),{header:l}),classes:c};return a.a.createElement("div",{id:"OptOutDialog"},a.a.createElement(O.a,Object.assign({},r),this.props.children))}}v.displayName="CCPAOptOutDialog",v.propTypes={isOpen:g.a.bool,isModal:g.a.bool,header:g.a.string,isFixedHeader:g.a.bool,isFullScreen:g.a.bool,children:g.a.node,translate:g.a.func,handleDialogClose:g.a.func,style:g.a.object,classes:g.a.object};var h=s(1447),E=s(902),j=s(897),C=s(58),f=s(1104),_=s(1448),S=s(903),T=s(1074),x=s(35),I=s(969),R=s(854),F=s(79);const A=Object.assign(Object.assign({},h.a),E.a),N=Object.assign(Object.assign({},E.a),S.a),P=Object.assign(Object.assign({},T.a),{trigger:{trigger:T.a.trigger},menu:Object.assign(Object.assign({},T.a),{checkbox:{label:{label:N.label,hidden:N.hidden}}})}),D=Object.assign(Object.assign({},N),{multiselect:P});class w extends y.a{constructor(e){super(e),this.ccpaOptOutRadioChange=(e,t)=>{this.setState({ccpaOptOutRadioValue:t}),this.props.setOptOutRadioOptions(t)},this.onGuestsSelection=(e,t,s)=>{this.setState({guests:s}),this.props.updateGuests(s)},this.getCCPAOptOutContent=(e,t,s)=>{const{qualifyingQuestionText:i,successfulOptOutText:n,unregisteredForEventText:o,instructionalText:c,dialogMode:l,qualifyingErrorText:r}=this.props;return l===I.c.SUCCESS_OPT_OUT?a.a.createElement("div",Object.assign({},Object(x.a)(Object.assign(Object.assign({},this.props),{style:s}),"mainText")),t(n)):l===I.c.FAILURE_OPT_OUT?a.a.createElement("div",Object.assign({},Object(x.a)(Object.assign(Object.assign({},this.props),{style:s}),"mainText")),t("EventWidgets_Ccpa_FailureOptOutText__resx")):l===I.c.ADMIN_REG?a.a.createElement("div",Object.assign({},Object(x.a)(Object.assign(Object.assign({},this.props),{style:s}),"mainText")),t("EventWidgets_Ccpa_AdminRegText__resx")):l===I.c.SHOW_NO_CALAFORNIA_RESIDENT?a.a.createElement("div",Object.assign({},Object(x.a)(Object.assign(Object.assign({},this.props),{style:s}),"mainText","defaultSpacing")),t(r)):e?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",Object.assign({},Object(x.a)(Object.assign(Object.assign({},this.props),{style:s}),"mainText","defaultSpacing"),{dangerouslySetInnerHTML:{__html:t(c)}})),l===I.c.SHOW_QUALIFYING_QUESTION&&a.a.createElement("div",Object.assign({},Object(x.a)(Object.assign(Object.assign({},this.props),{style:s}),"qualifyingQuestionSpacing")),a.a.createElement(j.b,{label:t(i),fieldName:"type-askQualifyingQuestion",name:"type-askQualifyingQuestion",classes:A,display:"vertical",style:s,options:{selectedValue:this.state.ccpaOptOutRadioValue,optionArray:[{name:t("EventWidgets_GenericText_Yes__resx"),value:I.b.YES},{name:t("EventWidgets_GenericText_No__resx"),value:I.b.NO}]},onChange:this.ccpaOptOutRadioChange})),l===I.c.SHOW_USER_INFO&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",Object.assign({},Object(x.a)(Object.assign(Object.assign({},this.props),{style:s}),"label","defaultSpacing")),t("EventWidgets_VerifyDetails_CCPA__resx")),a.a.createElement("div",Object.assign({},Object(x.a)(Object.assign(Object.assign({},this.props),{style:s}),"label","defaultSpacing")),t("EventWidgets_Fields_FirstName__resx")),a.a.createElement("div",Object.assign({},Object(x.a)(Object.assign(Object.assign({},this.props),{style:s}),"input")),this.props.primaryEventRegistrationInfo.firstName),a.a.createElement("div",Object.assign({},Object(x.a)(Object.assign(Object.assign({},this.props),{style:s}),"label","defaultSpacing")),t("EventWidgets_Fields_LastName__resx")),a.a.createElement("div",Object.assign({},Object(x.a)(Object.assign(Object.assign({},this.props),{style:s}),"input")),this.props.primaryEventRegistrationInfo.lastName),this.props.primaryEventRegistrationInfo.emailAddress&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",Object.assign({},Object(x.a)(Object.assign(Object.assign({},this.props),{style:s}),"label","defaultSpacing")),t("EventWidgets_Fields_EmailAddress__resx")),a.a.createElement("div",Object.assign({},Object(x.a)(Object.assign(Object.assign({},this.props),{style:s}),"input")),this.props.primaryEventRegistrationInfo.emailAddress)),this.state.guests&&this.state.guests.length>0&&a.a.createElement("div",Object.assign({},Object(x.a)(Object.assign({},this.props),"multiselectGuests")),a.a.createElement("div",Object.assign({},Object(x.a)(Object.assign(Object.assign({},this.props),{style:s}),"label","selectGuestToOptOut")),t("EventWidgets_SelectGuests_CCPA__resx")),a.a.createElement(_.a,{classes:Object.assign(Object.assign({},D),this.props.classes)},a.a.createElement(f.a,Object.assign({fieldName:"guests",options:this.state.guests,onChange:this.onGuestsSelection},Object(C.a)("multi-select-in-global-styles"),{selectedTextCallback:e=>`${e} ${t("EventWidgets_GroupFlights_Selected__resx")}`,enableSelectAll:!1,enableDeselectAll:!1,enableFilter:!1})))))):a.a.createElement("div",Object.assign({},Object(x.a)(Object.assign(Object.assign({},this.props),{style:s}),"mainText","defaultSpacing")),t(o))};const t=e.guestsEventRegistrationsInfo.map(e=>({name:Object(F.c)(e),checked:!1,value:e.attendeeEntityId}));this.state={guests:t,ccpaOptOutRadioValue:I.b.YES},this.props.setOptOutRadioOptions(this.state.ccpaOptOutRadioValue)}render(){const{isAttendeeRegistered:e,translate:t,dialogMode:s,style:i,classes:n,handleDialogConfirmationClick:o}=this.props;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,this.getCCPAOptOutContent(e,t,i)),a.a.createElement(R.a,{classes:n,title:t(I.a[s]),style:Object.assign(Object.assign({},i),{button:i.button}),kind:"primary",onClick:o}))}}w.displayName="CCPADialogContent",w.propTypes={primaryEventRegistrationInfo:g.a.object,isAttendeeRegistered:g.a.bool,guestsEventRegistrationsInfo:g.a.array,qualifyingQuestionText:g.a.string,qualifyingErrorText:g.a.string,successfulOptOutText:g.a.string,unregisteredForEventText:g.a.string,instructionalText:g.a.string,style:g.a.object,setOptOutRadioOptions:g.a.func,updateGuests:g.a.func,handleDialogConfirmationClick:g.a.func,dialogMode:g.a.string};var G={defaultSpacing:"FooterWidget__defaultSpacing___8vXBJ",qualifyingQuestionSpacing:"FooterWidget__qualifyingQuestionSpacing___39aYy",selectGuestToOptOut:"FooterWidget__selectGuestToOptOut___fWgN2",content:"FooterWidget__content___1Svrp",dragContainer:"FooterWidget__dragContainer___JQzPl",header:"FooterWidget__header___1rprk",button:"FooterWidget__button___3L2fq",multiselectGuests:"FooterWidget__multiselectGuests___28q6P",element:"FooterWidget__element___2SLUl",inputContainer:"FooterWidget__inputContainer___3Owm_"},M=s(855),U=s(107);const W=Object(p.c)((e,t)=>Object.assign(Object.assign(Object.assign({},e),t),{button:Object.assign(Object.assign({},t.elements.primaryButton),{styleMapping:"primaryButton"}),input:Object.assign(Object.assign({},t.elements.input),{styleMapping:"input"}),label:Object.assign(Object.assign({},t.elements.label),{styleMapping:"label"}),body1:Object.assign(Object.assign({},t.elements.body1),{styleMapping:"body1"}),header:e.dialog?Object.assign({},e.dialog.header):{styleMapping:"header3"},dragHandle:e.dialog?Object.assign(Object.assign({},e.dialog.header),{spacing:{padding:0}}):{styleMapping:"header3"},headerText:e.dialog?e.dialog.headerText:{styleMapping:"header2"},messageContainer:e.dialog?e.dialog.body:{}}));function Q(e){var t,s;const i=null===(t=null==e?void 0:e.localizedUserText)||void 0===t?void 0:t.currentLocale;return null===(s=null==e?void 0:e.localizedUserText)||void 0===s?void 0:s.localizations[i]}function q(e,t){return!(!Object(U.c)(t)||!e||0===Object.keys(e).length)}function k(e,t,s){var i;return(t.experiments?t.experiments.isMovePrivacyComplianceFromSiteEditorEnabled:null===(i=t.experimentSettings)||void 0===i?void 0:i.isMovePrivacyComplianceFromSiteEditorEnabled)&&Object(l.n)(t)?function(e){const t=e.text.translate;return{showComplianceText:t(Object(l.m)(e)),complianceText:t(Object(l.d)(e)),showQualifyingQuestion:t(Object(l.f)(e)),qualifyingQuestionText:t(Object(l.g)(e)),qualifyingErrorText:t(Object(l.e)(e)),successfulOptOutText:t(Object(l.a)(e)),unregisteredForEventText:t(Object(l.c)(e)),instructionalText:t(Object(l.b)(e))}}(t):"ccpa"in s&&(null==s?void 0:s.ccpa)?function(e,t,s){const i=Q(t),a=q(i,t.event);return{showComplianceText:s.visible,complianceText:a?i["website.layoutItems.CventFooterSection.config.ccpa.linkText"]:s.linkText,showQualifyingQuestion:s.qualifyingQuestion.visible,qualifyingQuestionText:a?i["website.layoutItems.CventFooterSection.config.ccpa.qualifyingQuestion.text"]:s.qualifyingQuestion.text,qualifyingErrorText:a?i["website.layoutItems.CventFooterSection.config.ccpa.qualifyingQuestion.errorText"]:s.qualifyingQuestion.errorText,successfulOptOutText:a?i["website.layoutItems.CventFooterSection.config.ccpa.successfulOptOutText"]:s.successfulOptOutText,unregisteredForEventText:a?i["website.layoutItems.CventFooterSection.config.ccpa.unregisteredForEventText"]:s.unregisteredForEventText,instructionalText:a&&i["website.layoutItems.CventFooterSection.config.ccpa.content.blocks[0].text"]?Object(M.a)(i["website.layoutItems.CventFooterSection.config.ccpa.content.blocks[0].text"],e.translate,e.style.palette):s.instructionalText&&Object(M.a)(s.instructionalText,e.translate,e.style.palette)}}(e,t,null==s?void 0:s.ccpa):{}}function L(e,t){var s;const i=[];if((e.experiments?e.experiments.isMovePrivacyComplianceFromSiteEditorEnabled:null===(s=e.experimentSettings)||void 0===s?void 0:s.isMovePrivacyComplianceFromSiteEditorEnabled)&&Object(l.n)(e))return Object(l.q)(e)&&i.push({url:Object(c.b)(e.event.languageId||e.event.cultureCode),text:Object(l.j)(e)}),i.concat(Object(c.a)(e));const a=Q(e),n=q(a,e.event);return t&&t.cventPrivacyPolicy&&t.cventPrivacyPolicy.visible&&i.push({url:Object(c.b)(e.event.languageId||e.event.cultureCode),text:n?a["website.layoutItems.CventFooterSection.config.cventPrivacyPolicy.text"]:t.cventPrivacyPolicy.text}),((e,t,s,i)=>(t&&t.plannerPrivacyPolicy&&t.plannerPrivacyPolicy.visible&&e.push({url:s?i["website.layoutItems.CventFooterSection.config.plannerPrivacyPolicy.url"]:t.plannerPrivacyPolicy.url,text:s?i["website.layoutItems.CventFooterSection.config.plannerPrivacyPolicy.text"]:t.plannerPrivacyPolicy.text}),e))(i,t,n,a)}class H extends d.default{constructor(e){super(e),this.openCcpaDialog=()=>{const{isAdminReg:e,isAttendeeRegistered:t,CCPAConfig:s,ccpaDialogMode:i,switchCcpaDialogMode:a}=this.props;i!==I.c.SUCCESS_OPT_OUT&&i!==I.c.FAILURE_OPT_OUT||this.setState({ccpaGuestList:[]},()=>{a(I.c.UNREGISTERED)}),this.setState({showCcpaDialog:!0},()=>{t?e?a(I.c.ADMIN_REG):s.showQualifyingQuestion?a(I.c.SHOW_QUALIFYING_QUESTION):s.showQualifyingQuestion||a(I.c.SHOW_USER_INFO):a(I.c.UNREGISTERED)})},this.getCcpaComplianceRequest=()=>{const{primaryEventRegistrationInfo:e,guestsEventRegistrationsInfo:t,isPlanner:s}=this.props,{ccpaGuestList:i}=this.state;if(!e)return[];const a=[];a.push({firstName:e.firstName||"",lastName:e.lastName||"",email:e.emailAddress||"",attendeeEntityType:"ATTENDEE",attendeeEntityId:e.attendeeEntityId,isCreatedByAttendee:!s});const n=i&&i.filter(e=>e.checked);return n.length>0&&n.forEach(e=>{const i=t.filter(t=>t.attendeeEntityId===e.value)[0];a.push({firstName:i.firstName||"",lastName:i.lastName||"",email:i.emailAddress||"",attendeeEntityType:"GUEST",attendeeEntityId:i.attendeeEntityId,isCreatedByAttendee:!s})}),a},this.updateGuests=e=>{this.setState({ccpaGuestList:e})},this.closeCcpaDialog=()=>{this.setState({showCcpaDialog:!1,ccpaGuestList:[]},()=>this.props.switchCcpaDialogMode(I.c.UNREGISTERED))},this.handleDialogConfirmationClick=()=>{const{ccpaOptOutValue:e}=this.state,{makeCcpaComplianceRequest:t,ccpaDialogMode:s,switchCcpaDialogMode:i}=this.props;s===I.c.UNREGISTERED||s===I.c.ADMIN_REG||s===I.c.SUCCESS_OPT_OUT||s===I.c.FAILURE_OPT_OUT||s===I.c.SHOW_NO_CALAFORNIA_RESIDENT?this.setState({showCcpaDialog:!1}):s===I.c.SHOW_QUALIFYING_QUESTION&&e===I.b.YES?i(I.c.SHOW_USER_INFO):s===I.c.SHOW_QUALIFYING_QUESTION&&e===I.b.NO?i(I.c.SHOW_NO_CALAFORNIA_RESIDENT):s===I.c.SHOW_USER_INFO&&t(this.getCcpaComplianceRequest())},this.setOptOutRadioOptions=e=>{this.setState({ccpaOptOutValue:e})},this.state={showCcpaDialog:!1,ccpaOptOutValue:"",ccpaGuestList:[]}}getStyleObject(){return Object.assign(Object.assign({},super.getStyleObject()),{label:this.getElementInlineStyle("label"),input:this.getElementInlineStyle("input"),mainText:this.getElementInlineStyle("body1"),button:this.getElementInlineStyle("button"),header:this.getElementInlineStyle("header"),exit:this.getElementInlineStyle("headerText"),dragContainer:this.getElementInlineStyle("messageContainer"),headerFont:this.getElementInlineStyle("headerText")})}getCCPAOptOutModalContent(e,t){const{primaryEventRegistrationInfo:s,guestsEventRegistrationsInfo:i,isAttendeeRegistered:n,translate:o,qualifyingQuestionText:c,successfulOptOutText:l,qualifyingErrorText:r,complianceText:g,unregisteredForEventText:d,instructionalText:u,ccpaDialogMode:p}=e,O=this.getStyleObject(),b={translate:o,primaryEventRegistrationInfo:s,guestsEventRegistrationsInfo:i,isAttendeeRegistered:n,style:O,qualifyingQuestionText:c,qualifyingErrorText:r,successfulOptOutText:l,unregisteredForEventText:d,instructionalText:u,classes:t,updateGuests:this.updateGuests,setOptOutRadioOptions:this.setOptOutRadioOptions,handleDialogConfirmationClick:this.handleDialogConfirmationClick,dialogMode:p},m={isOpen:!0,isModal:!0,header:o(g),isFixedHeader:!1,isFullScreen:!1,translate:o,style:O,classes:t,handleDialogClose:this.closeCcpaDialog,updateGuests:this.updateGuests,children:a.a.createElement(w,Object.assign({},b))};return a.a.createElement(v,Object.assign({},m))}render(){const e=this.props,t=G;if(e.allowCustomFooter&&0===e.additionalPolicyLinks.length&&!e.CCPAConfig.showComplianceText&&e.isOnGuestSide)return a.a.createElement("div",null);const s=Object.assign(Object.assign(Object.assign({},e),e.CCPAConfig),{onComplianceClick:this.openCcpaDialog});return a.a.createElement(a.a.Fragment,null,this.state.showCcpaDialog&&e.isOnGuestSide&&this.getCCPAOptOutModalContent(s,t),a.a.createElement(n.a,Object.assign({},s)))}}H.displayName="EventFooterWidget",H.propTypes={allowCustomFooter:g.a.bool,showPrivacyPolicy:g.a.bool,additionalPolicyLinks:g.a.array,isOnGuestSide:g.a.object,primaryEventRegistrationInfo:g.a.object,isAttendeeRegistered:g.a.bool,guestsEventRegistrationsInfo:g.a.array,isAdminReg:g.a.bool,style:g.a.object,translate:g.a.func,ccpaDialogMode:g.a.string,CCPAConfig:g.a.object,switchCcpaDialogMode:g.a.func,makeCcpaComplianceRequest:g.a.func};var V=Object(o.b)((e,t)=>{var s,i,a;const n=(null==t?void 0:t.cventFooterSectionConfig)||(null===(a=null===(i=null===(s=e.website)||void 0===s?void 0:s.layoutItems)||void 0===i?void 0:i.CventFooterSection)||void 0===a?void 0:a.config);return{allowCustomFooter:e.account.settings.allowCustomEventFooter,showPrivacyPolicy:!1,additionalPolicyLinks:L(e,n),isOnGuestSide:Object(u.getIn)(e,["userSession"]),primaryEventRegistrationInfo:t.primaryEventRegistrationInfo,guestsEventRegistrationsInfo:t.guestsEventRegistrationsInfo,isAttendeeRegistered:t.isAttendeeRegistered,style:W(e.website.theme.global,t.style),translate:t.translate,isAdminReg:t.isAdminReg,CCPAConfig:k(t,e,n),makeCcpaComplianceRequest:t.makeCcpaComplianceRequest,switchCcpaDialogMode:t.switchCcpaDialogMode,ccpaDialogMode:t.ccpaDialogMode,cventFooterConfig:n}})(H),Y=s(7),B=s(26);const z=e=>({type:B.s,payload:{dialogMode:e}});var J=s(16),$=s(1190),X=s(30);const K=e=>Y.w(e),Z=Object(p.a)(K,e=>{let t={};return e&&e.attendee&&(t={firstName:e.attendee.personalInformation.firstName,lastName:e.attendee.personalInformation.lastName,emailAddress:e.attendee.personalInformation.emailAddress,eventRegistrationId:e.eventRegistrationId,attendeeEntityId:e.attendee.personalInformation.contactId}),t}),ee=Object(p.a)(K,e=>!!e&&!!e.confirmationNumber),te=Object(p.a)(e=>Y.F(e),e=>e.map(e=>({firstName:e.attendee.personalInformation.firstName,lastName:e.attendee.personalInformation.lastName,eventRegistrationId:e.eventRegistrationId,emailAddress:e.attendee.personalInformation.emailAddress,attendeeEntityId:e.attendee.attendeeId}))),se=Object(o.b)((e,t)=>{var s,i;const a=Y.g(e);return{primaryEventRegistrationInfo:Z(e),guestsEventRegistrationsInfo:te(e),isAttendeeRegistered:ee(e),isAdminReg:a,ccpaDialogMode:null===(i=null===(s=e.privacy)||void 0===s?void 0:s.ccpa)||void 0===i?void 0:i.dialogMode,isPlanner:e.defaultUserSession.isPlanner,cventFooterSectionConfig:t.cventFooterSectionConfig}},{switchCcpaDialogMode:z,makeCcpaComplianceRequest:e=>async(t,s)=>{const{clients:{ccpaComplianceClient:i}}=s(),{isSuccessful:a}=await i.makeCcpaComplianceRequest(e);t(z(a?I.c.SUCCESS_OPT_OUT:I.c.FAILURE_OPT_OUT))}})(V);function ie(e){var t,s;const i=Object(o.d)(X.c),n=Object($.a)(i),c=null===(s=null===(t=null==n?void 0:n.layoutItems)||void 0===t?void 0:t.CventFooterSection)||void 0===s?void 0:s.config;return a.a.createElement(se,Object.assign({cventFooterSectionConfig:c},e))}function ae(e){return Object(J.q)(J.a.SiteEditorPageData)?a.a.createElement(ie,Object.assign({},e)):a.a.createElement(se,Object.assign({},e))}}}]);
//# sourceMappingURL=288.prod.master_v12.23ad8255586c79c7ddea7f42d75cc8c0.js.map